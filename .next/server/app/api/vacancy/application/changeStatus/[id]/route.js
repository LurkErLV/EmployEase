"use strict";(()=>{var e={};e.id=661,e.ids=[661],e.modules={53524:e=>{e.exports=require("@prisma/client")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{e.exports=require("assert")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},63477:e=>{e.exports=require("querystring")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},19972:(e,t,a)=>{a.r(t),a.d(t,{headerHooks:()=>g,originalPathname:()=>h,patchFetch:()=>w,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>x,staticGenerationAsyncStorage:()=>v,staticGenerationBailout:()=>y});var r={};a.r(r),a.d(r,{POST:()=>l});var s=a(95419),i=a(69108),n=a(99678),o=a(78070),c=a(81355),p=a(83411),u=a(23106);async function l(e,{params:t}){let a=await (0,c.getServerSession)(p.L),{searchParams:r}=new URL(e.url);if(!a||"Employee"===a.user.role)return o.Z.json({ok:!1,message:"Access restricted"},{status:403});let s=r.get("status");return s?["Waiting","Approved","Rejected"].includes(s)?(await u.Z.application.update({where:{id:parseInt(t.id)},data:{status:s}}).finally(()=>{u.Z.$disconnect()}),o.Z.json({ok:!0},{status:200})):o.Z.json({ok:!1,message:"Invalid status"},{status:400}):o.Z.json({ok:!1,message:"Status is required"},{status:400})}let d=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/vacancy/application/changeStatus/[id]/route",pathname:"/api/vacancy/application/changeStatus/[id]",filename:"route",bundlePath:"app/api/vacancy/application/changeStatus/[id]/route"},resolvedPagePath:"/Users/lurker/Desktop/employease/app/api/vacancy/application/changeStatus/[id]/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:m,staticGenerationAsyncStorage:v,serverHooks:x,headerHooks:g,staticGenerationBailout:y}=d,h="/api/vacancy/application/changeStatus/[id]/route";function w(){return(0,n.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:v})}},83411:(e,t,a)=>{a.d(t,{L:()=>n});var r=a(86485),s=a(23106),i=a(6521);let n={secret:process.env.AUTH_SECRET,session:{strategy:"jwt"},providers:[(0,r.Z)({name:"Credentials",credentials:{email:{label:"Email",type:"text"},password:{label:"Password",type:"password"}},async authorize(e,t){if(!e)return;let{email:a,password:r}=e,n=await s.Z.user.findFirst({where:{email:a},include:{application:!0,vacancies:!0}}).finally(()=>{s.Z.$disconnect()});if(!n)throw Error("User not found!");if(!await (0,i.compare)(r,n.password))throw Error("Incorrect password");return{id:n.id,email:n.email,name:n.name,surname:n.surname,role:n.Role,application:n.application,vacancies:n.vacancies}}})],pages:{signIn:`${process.env.BASE_PATH}/auth/signin`,newUser:process.env.BASE_PATH},callbacks:{jwt:async({token:e})=>e,session:async({session:e,token:t})=>{if(!t.email)return null;let a=await s.Z.user.findFirst({where:{email:t.email},include:{application:!0,vacancies:!0}}).finally(()=>{s.Z.$disconnect()});return a?(e.user={id:a.id,email:a.email,name:a.name,surname:a.surname,role:a.Role,application:a.application,vacancies:a.vacancies},e):null}}}},23106:(e,t,a)=>{a.d(t,{Z:()=>r});let r=new(a(53524)).PrismaClient}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[431,521,123,206],()=>a(19972));module.exports=r})();